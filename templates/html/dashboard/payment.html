<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">


<center style="padding-top: 10%;">
    <h2>Event Payment</h2>
    <p>Amount to be paid: â‚¹{{ amount|floatformat:2 }}</p>
<button id="pay-btn" class="btn btn-success">Pay Now</button>
</center>

<script>
    document.getElementById("pay-btn").onclick = function(){
        var options = {
            "key": "{{ razorpay_key }}",
            "amount": "{{ amount }}",
            "currency": "INR",
            "name": "Quminity Event",
            "description": "Event Entry Fee",
            "order_id": "{{ order_id }}",
            "handler": function (response){
                fetch("/payment-success/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": "{{ csrf_token }}"
                    },
                    body: JSON.stringify(response)
                })
                .then(() => {
                    window.location.href = "/payment-done/{{ order_id }}/";
                });
            }
        };

        var rzp = new Razorpay(options);
        rzp.open();
    }
</script>
